(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a3d2"],{bb51:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"d-flex justify-center",attrs:{id:"home"}},t._l(t.publications,(function(i,n){return e("div",{key:n},t._l(i.publications,(function(a,s){return e("div",{key:s},[e("publication",{attrs:{idPublication:s,publication:a,item:i,index:n,loading:t.loading}})],1)})),0)})),0)},a=[],s=(e("c740"),e("a434"),e("b85c")),c=(e("96cf"),e("1da1")),o=e("5530"),r=e("2f62"),l=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("v-card",{staticClass:"mt-5",attrs:{flat:"","max-width":"500","loader-height":"2",loading:t.loading}},[e("v-img",{staticClass:"align-end grey lighten-2",attrs:{width:"100%",src:t.publication.images,"lazy-src":t.publication.images,"aspect-ratio":"1"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[e("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[e("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}])}),e("v-list-item",[e("v-list-item-avatar",{attrs:{color:"grey darken-3"}},[e("v-img",{staticClass:"elevation-6",attrs:{src:t.item.avatar}})],1),e("v-list-item-content",[e("v-list-item-title",[e("v-btn",{staticClass:"pl-0",attrs:{text:"",color:"red lighten-2",to:"/profile/"+t.item._id}},[t._v(" "+t._s(t.item.username)+" ")])],1)],1),e("v-list-item-content",[e("span",{staticClass:"px-auto text-right text--disabled"},[t._v(t._s(t.publication.timestamp))])])],1),e("v-card-title",{staticClass:"pb-0"},[t._v(t._s(t.publication.description))]),e("v-card-actions",[e("v-btn",{attrs:{icon:"",color:t.publication.isLike?"red":"blue"},on:{click:function(i){return t.updateLike(t.publication._id,t.index,t.idPublication)}}},[e("v-icon",[t._v("fas fa-heart")])],1),e("v-btn",{staticClass:"btn-person",attrs:{text:""},on:{click:function(i){return t.changeView("likes")}}},[t.publication.reactions?e("span",{staticClass:"px-auto text-right text--disabled"},[t._v(t._s(t.publication.reactions.length)+" Like")]):t._e()]),e("v-btn",{staticClass:"btn-person",attrs:{text:""},on:{click:function(i){return t.changeView("comments")}}},[e("span",{staticClass:"px-auto text-right text--disabled"},[t._v("Comments")])])],1),"likes"==t.changeViewActive?e("likesPublication",{attrs:{reactions:t.publication.reactions}}):t._e(),e("comments",{directives:[{name:"show",rawName:"v-show",value:"comments"==t.changeViewActive,expression:"changeViewActive == 'comments'"}],attrs:{publicationId:t.publication._id}})],1)],1)},u=[],p=(e("a9e3"),e("d392")),d=e("961b"),b={name:"publication",components:{likesPublication:p["a"],comments:d["a"]},props:{idPublication:Number,publication:Object,item:Object,index:Number,loading:Boolean},data:function(){return{changeViewActive:"comments"}},methods:{changeView:function(t){this.changeViewActive=t}}},m=b,f=e("2877"),h=Object(f["a"])(m,l,u,!1,null,null,null),v=h.exports,g=e("c1df"),w=e.n(g),k=e("bc3a"),x=e.n(k),_={name:"Home",components:{publication:v},data:function(){return{publications:[],loading:!1}},created:function(){this.dataUser?this.getPublicationsOfFollows():this.$router.push("/login")},computed:Object(o["a"])({},Object(r["c"])(["dataUser","token"])),methods:{getPublicationsOfFollows:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var e,n,a,c,r,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.loading=!0,i.next=3,x.a.post("/functs/publicationsOfFollow",{},{headers:{Authorization:t.token}});case 3:e=i.sent,n=Object(s["a"])(e.data.publicationFollow);try{for(n.s();!(a=n.n()).done;){for(r in c=a.value,c.publicationOfUser)l=c.publicationOfUser[r].reactions.findIndex((function(i){return i==t.dataUser._id})),c.publicationOfUser[r].isLike=!(l<0),c.publicationOfUser[r].timestamp=w()(c.publicationOfUser[r].timestamp).startOf("minute").fromNow();t.publications.push(Object(o["a"])({publications:c.publicationOfUser},c.userFollow))}}catch(u){n.e(u)}finally{n.f()}t.loading=!1;case 7:case"end":return i.stop()}}),i)})))()},updateLike:function(t,i,e){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,x.a.post("/functs/likePublication",{idPublication:t},{headers:{Authorization:n.token}});case 2:s=a.sent,s.data.success&&(s.data.isLike?n.publications[i].publications[e].reactions.push(n.dataUser._id):(c=n.publications[i].publications[e].reactions.findIndex((function(t){return t==n.dataUser._id})),n.publications[i].publications[e].reactions.splice(c,1)),n.publications[i].publications[e].isLike=s.data.isLike);case 4:case"end":return a.stop()}}),a)})))()},changeView:function(t){this.changeViewActive=t}}},O=_,C=Object(f["a"])(O,n,a,!1,null,null,null);i["default"]=C.exports}}]);
//# sourceMappingURL=chunk-2d21a3d2.f64af45b.js.map