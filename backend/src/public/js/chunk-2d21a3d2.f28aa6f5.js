(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a3d2"],{bb51:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-row",[s("v-col",{attrs:{col:"4"}}),s("v-col",{attrs:{col:"4"}},[t.posts.length>0?s("div",t._l(t.posts,(function(e,a){return s("posts",{key:a,attrs:{user:e,loading:t.loading,indexUser:a},on:{updateLike:t.updateLike}})})),1):t._e(),s("message",{attrs:{message:t.messages}})],1),s("v-col",{attrs:{col:"4"}})],1)],1)},n=[],o=(s("c740"),s("a434"),s("96cf"),s("1da1")),i=s("5530"),r=s("2f62"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[""!=t.user.posts?s("v-container",t._l(t.user.posts,(function(e,a){return s("v-card",{key:a,staticClass:"mt-5",attrs:{flat:"","max-width":"500","loader-height":"2",loading:t.loading}},[s("v-img",{staticClass:"align-end grey lighten-2",attrs:{width:"100%",src:e.images,"lazy-src":e.images,"aspect-ratio":"1"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[s("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[s("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)}),s("v-list-item",[s("v-list-item-avatar",{attrs:{color:"grey darken-3"}},[s("v-img",{staticClass:"elevation-6",attrs:{src:t.user.avatar}})],1),s("v-list-item-content",[s("v-list-item-title",[s("v-btn",{staticClass:"pl-0",attrs:{text:"",color:"red lighten-2",to:"/profile/"+t.user._id}},[t._v(t._s(t.user.username))])],1)],1),s("v-list-item-content",[s("span",{staticClass:"px-auto text-right text--disabled"},[t._v(" "+t._s(t._f("formatTimestamp")(e.timestamp))+" ")])])],1),s("v-card-title",{staticClass:"pb-0"},[t._v(t._s(e.description))]),s("v-card-actions",[s("v-btn",{attrs:{icon:"",color:t.isLike(e.reactions)},on:{click:function(s){return t.updateLike(e._id,a)}}},[s("v-icon",[t._v("fas fa-heart")])],1),s("span",{staticClass:"px-auto text-right text--disabled"},[t._v(t._s(e.reactions.length)+" Likes")]),s("v-spacer"),s("v-btn",{attrs:{icon:"",color:"info"},on:{click:function(s){return t.showImage(e,a)}}},[s("v-icon",[t._v("far fa-eye")])],1)],1)],1)})),1):t._e(),s("modal-show-post",{attrs:{enableModalPost:t.enableModalPost,post:t.dataImage},on:{changeActive:function(e){t.enableModalPost=e},updateLike:t.updateLikeEventModal}})],1)},l=[],u=(s("a9e3"),s("c1df")),d=s.n(u),p=s("bc3a"),f=s.n(p),m=s("f42f"),h={name:"post",components:{modalShowPost:m["a"]},props:{user:Object,loading:Boolean,indexUser:Number,item:Object},data:function(){return{enableModalPost:!1,dataImage:{},indexPost:0}},computed:Object(i["a"])({},Object(r["c"])(["idUser","token"])),methods:{isLike:function(t){var e=this,s=t.findIndex((function(t){return t==e.idUser}));return s<0?"blue":"red"},updateLike:function(t,e){var s=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,f.a.post("/functs/likePost",{idPost:t},{headers:{Authorization:s.token}});case 2:n=a.sent,n.data.success&&s.$emit("updateLike",{islike:n.data.isLike,user:s.indexUser,post:e});case 4:case"end":return a.stop()}}),a)})))()},showImage:function(t,e){this.enableModalPost=!0,this.dataImage=t,this.indexPost=e},updateLikeEventModal:function(t){this.$emit("updateLike",{islike:t,user:this.indexUser,post:this.indexPost})}},filters:{formatTimestamp:function(t){return d()(t).startOf("minutes").fromNow()}}},g=h,v=s("2877"),k=Object(v["a"])(g,c,l,!1,null,null,null),b=k.exports,x=s("16c2"),w={name:"Home",components:{posts:b,message:x["a"]},data:function(){return{posts:[],loading:!1,messages:{}}},created:function(){this.idUser?this.getPostsOfFollows():this.$router.push("/login")},computed:Object(i["a"])({},Object(r["c"])(["idUser","token"])),methods:{getPostsOfFollows:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,f.a.post("/functs/postsOfFollow",{},{headers:{Authorization:t.token}});case 3:s=e.sent,s.data.success&&(t.posts=s.data.posts,t.posts.length<=0?t.messages={text:"Not following anyone yet, search to see their posts",color:"indigo"}:t.messages={text:"Is already up to date",color:"info"}),t.loading=!1;case 6:case"end":return e.stop()}}),e)})))()},updateLike:function(t){var e=this;if(t.islike)this.posts[t.user].posts[t.post].reactions.push(this.idUser);else{var s=this.posts[t.user].posts[t.post].reactions.findIndex((function(t){return t==e.idUser}));this.posts[t.user].posts[t.post].reactions.splice(s,1)}}}},_=w,L=Object(v["a"])(_,a,n,!1,null,null,null);e["default"]=L.exports}}]);
//# sourceMappingURL=chunk-2d21a3d2.f28aa6f5.js.map