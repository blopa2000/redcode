{"version":3,"sources":["webpack:///./src/views/Home.vue?4f30","webpack:///./src/components/publication.vue?c4ab","webpack:///src/components/publication.vue","webpack:///./src/components/publication.vue?8427","webpack:///./src/components/publication.vue","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?493c","webpack:///./src/views/Home.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_l","item","index","key","publication","idPublication","loading","staticRenderFns","images","scopedSlots","_u","fn","proxy","avatar","_id","_v","_s","username","timestamp","description","isLike","on","$event","updateLike","changeView","reactions","length","_e","changeViewActive","directives","name","rawName","value","expression","components","likesPublication","comments","props","data","methods","view","component","publications","created","dataUser","getPublicationsOfFollows","$router","push","computed"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,wBAAwBC,MAAM,CAAC,GAAK,SAASP,EAAIQ,GAAIR,EAAgB,cAAE,SAASS,EAAKC,GAAO,OAAON,EAAG,MAAM,CAACO,IAAID,GAAOV,EAAIQ,GAAIC,EAAiB,cAAE,SAASG,EAAYC,GAAe,OAAOT,EAAG,MAAM,CAACO,IAAIE,GAAe,CAACT,EAAG,cAAc,CAACG,MAAM,CAAC,cAAgBM,EAAc,YAAcD,EAAY,KAAOH,EAAK,MAAQC,EAAM,QAAUV,EAAIc,YAAY,MAAK,MAAK,IAC7dC,EAAkB,G,kFCDlB,EAAS,WAAa,IAAIf,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,SAAS,CAACE,YAAY,OAAOC,MAAM,CAAC,KAAO,GAAG,YAAY,MAAM,gBAAgB,IAAI,QAAUP,EAAIc,UAAU,CAACV,EAAG,QAAQ,CAACE,YAAY,2BAA2BC,MAAM,CAAC,MAAQ,OAAO,IAAMP,EAAIY,YAAYI,OAAO,WAAWhB,EAAIY,YAAYI,OAAO,eAAe,KAAKC,YAAYjB,EAAIkB,GAAG,CAAC,CAACP,IAAI,cAAcQ,GAAG,WAAW,MAAO,CAACf,EAAG,QAAQ,CAACE,YAAY,mBAAmBC,MAAM,CAAC,MAAQ,SAAS,QAAU,WAAW,CAACH,EAAG,sBAAsB,CAACG,MAAM,CAAC,cAAgB,GAAG,MAAQ,qBAAqB,KAAKa,OAAM,OAAUhB,EAAG,cAAc,CAACA,EAAG,qBAAqB,CAACG,MAAM,CAAC,MAAQ,kBAAkB,CAACH,EAAG,QAAQ,CAACE,YAAY,cAAcC,MAAM,CAAC,IAAMP,EAAIS,KAAKY,WAAW,GAAGjB,EAAG,sBAAsB,CAACA,EAAG,oBAAoB,CAACA,EAAG,QAAQ,CAACE,YAAY,OAAOC,MAAM,CAAC,KAAO,GAAG,MAAQ,gBAAgB,GAAK,YAAYP,EAAIS,KAAKa,MAAM,CAACtB,EAAIuB,GAAG,IAAIvB,EAAIwB,GAAGxB,EAAIS,KAAKgB,UAAU,QAAQ,IAAI,GAAGrB,EAAG,sBAAsB,CAACA,EAAG,OAAO,CAACE,YAAY,qCAAqC,CAACN,EAAIuB,GAAGvB,EAAIwB,GAAGxB,EAAIY,YAAYc,iBAAiB,GAAGtB,EAAG,eAAe,CAACE,YAAY,QAAQ,CAACN,EAAIuB,GAAGvB,EAAIwB,GAAGxB,EAAIY,YAAYe,gBAAgBvB,EAAG,iBAAiB,CAACA,EAAG,QAAQ,CAACG,MAAM,CAAC,KAAO,GAAG,MAAQP,EAAIY,YAAYgB,OAAS,MAAQ,QAAQC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO9B,EAAI+B,WAAW/B,EAAIY,YAAYU,IAAItB,EAAIU,MAAMV,EAAIa,kBAAkB,CAACT,EAAG,SAAS,CAACJ,EAAIuB,GAAG,mBAAmB,GAAGnB,EAAG,QAAQ,CAACE,YAAY,aAAaC,MAAM,CAAC,KAAO,IAAIsB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO9B,EAAIgC,WAAW,YAAY,CAAEhC,EAAIY,YAAqB,UAAER,EAAG,OAAO,CAACE,YAAY,qCAAqC,CAACN,EAAIuB,GAAGvB,EAAIwB,GAAGxB,EAAIY,YAAYqB,UAAUC,QAAQ,WAAWlC,EAAImC,OAAO/B,EAAG,QAAQ,CAACE,YAAY,aAAaC,MAAM,CAAC,KAAO,IAAIsB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAO9B,EAAIgC,WAAW,eAAe,CAAC5B,EAAG,OAAO,CAACE,YAAY,qCAAqC,CAACN,EAAIuB,GAAG,iBAAiB,GAA4B,SAAxBvB,EAAIoC,iBAA6BhC,EAAG,mBAAmB,CAACG,MAAM,CAAC,UAAYP,EAAIY,YAAYqB,aAAajC,EAAImC,KAAK/B,EAAG,WAAW,CAACiC,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAA+B,YAAxBxC,EAAIoC,iBAAgCK,WAAW,mCAAmClC,MAAM,CAAC,cAAgBP,EAAIY,YAAYU,QAAQ,IAAI,IACvsE,EAAkB,G,oCC+CtB,GACEgB,KAAF,cACEI,WAAY,CACVC,iBAAJ,OACIC,SAAJ,QAEEC,MAAO,CACLhC,cAAJ,OACID,YAAJ,OACIH,KAAJ,OACIC,MAAJ,OACII,QAAJ,SAEEgC,KAbF,WAcI,MAAO,CACLV,iBAAN,aAGEW,QAAS,CACPf,WADJ,SACA,GACM/B,KAAKmC,iBAAmBY,KCpEuT,I,YCOjVC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,kDCHf,GACEX,KAAM,OACNI,WAAF,CACI9B,YAAJ,GAEEkC,KALF,WAMI,MAAO,CACLI,aAAN,GACMpC,SAAN,IAGEqC,QAXF,WAYSlD,KAAKmD,SAGRnD,KAAKoD,2BAFLpD,KAAKqD,QAAQC,KAAK,WAKtBC,SAAU,OAAZ,OAAY,CAAZ,GACA,sCAEET,QAAS,CACP,yBADJ,WACA,+KACA,aADA,SAEA,8EAFA,OAEA,EAFA,wBAGA,0BAHA,IAGA,4BAEA,SAFA,UAEA,oBACA,sFACA,qCACA,mGAEA,sFAVA,8BAYA,aAZA,8CAcI,WAfJ,SAeA,uLACA,wFADA,OACA,EADA,OAEA,iBACA,cAEA,kEAGA,iGACA,yDAEA,wDAXA,8CAcIf,WA7BJ,SA6BA,GACM/B,KAAKmC,iBAAmBY,KClEgT,ICO1U,EAAY,eACd,EACAjD,EACAgB,GACA,EACA,KACA,KACA,MAIa,e","file":"js/chunk-2d21a3d2.f64af45b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"d-flex justify-center\",attrs:{\"id\":\"home\"}},_vm._l((_vm.publications),function(item,index){return _c('div',{key:index},_vm._l((item.publications),function(publication,idPublication){return _c('div',{key:idPublication},[_c('publication',{attrs:{\"idPublication\":idPublication,\"publication\":publication,\"item\":item,\"index\":index,\"loading\":_vm.loading}})],1)}),0)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-card',{staticClass:\"mt-5\",attrs:{\"flat\":\"\",\"max-width\":\"500\",\"loader-height\":\"2\",\"loading\":_vm.loading}},[_c('v-img',{staticClass:\"align-end grey lighten-2\",attrs:{\"width\":\"100%\",\"src\":_vm.publication.images,\"lazy-src\":_vm.publication.images,\"aspect-ratio\":\"1\"},scopedSlots:_vm._u([{key:\"placeholder\",fn:function(){return [_c('v-row',{staticClass:\"fill-height ma-0\",attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"color\":\"grey lighten-5\"}})],1)]},proxy:true}])}),_c('v-list-item',[_c('v-list-item-avatar',{attrs:{\"color\":\"grey darken-3\"}},[_c('v-img',{staticClass:\"elevation-6\",attrs:{\"src\":_vm.item.avatar}})],1),_c('v-list-item-content',[_c('v-list-item-title',[_c('v-btn',{staticClass:\"pl-0\",attrs:{\"text\":\"\",\"color\":\"red lighten-2\",\"to\":'/profile/'+_vm.item._id}},[_vm._v(\" \"+_vm._s(_vm.item.username)+\" \")])],1)],1),_c('v-list-item-content',[_c('span',{staticClass:\"px-auto text-right text--disabled\"},[_vm._v(_vm._s(_vm.publication.timestamp))])])],1),_c('v-card-title',{staticClass:\"pb-0\"},[_vm._v(_vm._s(_vm.publication.description))]),_c('v-card-actions',[_c('v-btn',{attrs:{\"icon\":\"\",\"color\":_vm.publication.isLike ? 'red' : 'blue'},on:{\"click\":function($event){return _vm.updateLike(_vm.publication._id,_vm.index,_vm.idPublication)}}},[_c('v-icon',[_vm._v(\"fas fa-heart\")])],1),_c('v-btn',{staticClass:\"btn-person\",attrs:{\"text\":\"\"},on:{\"click\":function($event){return _vm.changeView('likes')}}},[(_vm.publication.reactions)?_c('span',{staticClass:\"px-auto text-right text--disabled\"},[_vm._v(_vm._s(_vm.publication.reactions.length)+\" Like\")]):_vm._e()]),_c('v-btn',{staticClass:\"btn-person\",attrs:{\"text\":\"\"},on:{\"click\":function($event){return _vm.changeView('comments')}}},[_c('span',{staticClass:\"px-auto text-right text--disabled\"},[_vm._v(\"Comments\")])])],1),(_vm.changeViewActive == 'likes')?_c('likesPublication',{attrs:{\"reactions\":_vm.publication.reactions}}):_vm._e(),_c('comments',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.changeViewActive == 'comments'),expression:\"changeViewActive == 'comments'\"}],attrs:{\"publicationId\":_vm.publication._id}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\r\n  <div>\r\n    <v-card flat class=\"mt-5\" max-width=\"500\" loader-height=\"2\" :loading=\"loading\">\r\n      <v-img class=\"align-end grey lighten-2\" width=\"100%\" :src=\"publication.images\" :lazy-src=\"publication.images\" aspect-ratio=\"1\"  >\r\n        <template v-slot:placeholder>\r\n          <v-row class=\"fill-height ma-0\" align=\"center\" justify=\"center\" >\r\n            <v-progress-circular indeterminate color=\"grey lighten-5\"></v-progress-circular>\r\n          </v-row>\r\n        </template>\r\n      </v-img>\r\n      <v-list-item>\r\n        <v-list-item-avatar color=\"grey darken-3\">\r\n          <v-img class=\"elevation-6\" :src=\"item.avatar\" ></v-img>\r\n        </v-list-item-avatar>\r\n\r\n        <v-list-item-content>\r\n          <v-list-item-title>\r\n            <v-btn class=\"pl-0\" text  color=\"red lighten-2\" :to=\"'/profile/'+item._id\" >\r\n              {{item.username}}\r\n            </v-btn>\r\n          </v-list-item-title>\r\n        </v-list-item-content>\r\n\r\n        <v-list-item-content>\r\n          <span class=\"px-auto text-right text--disabled\">{{publication.timestamp}}</span>\r\n        </v-list-item-content>\r\n        \r\n      </v-list-item>\r\n      <v-card-title  class=\"pb-0\">{{publication.description}}</v-card-title>\r\n      <v-card-actions>\r\n        <v-btn icon @click=\"updateLike(publication._id,index,idPublication)\" :color=\"publication.isLike ? 'red' : 'blue'\">\r\n          <v-icon>fas fa-heart</v-icon>\r\n        </v-btn>\r\n        <v-btn text class=\"btn-person\" @click=\"changeView('likes')\">\r\n          <span v-if=\"publication.reactions\" class=\"px-auto text-right text--disabled\">{{publication.reactions.length}} Like</span>\r\n        </v-btn>\r\n        <v-btn text class=\"btn-person\"  @click=\"changeView('comments')\">\r\n          <span class=\"px-auto text-right text--disabled\">Comments</span>\r\n        </v-btn>\r\n      </v-card-actions>\r\n      <likesPublication v-if=\"changeViewActive == 'likes'\" :reactions=\"publication.reactions\" />\r\n      <comments v-show=\"changeViewActive == 'comments'\" :publicationId=\"publication._id\" />\r\n    </v-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport likesPublication from \"@/components/likesPublication\"\r\nimport comments from \"@/components/comments\"\r\nexport default {\r\n  name:\"publication\",\r\n  components: {\r\n    likesPublication,\r\n    comments\r\n  },\r\n  props: {\r\n    idPublication:Number,\r\n    publication:Object,\r\n    item:Object,\r\n    index:Number,\r\n    loading:Boolean,\r\n  },\r\n  data() {\r\n    return {\r\n      changeViewActive:\"comments\"\r\n    }\r\n  },\r\n  methods: {\r\n    changeView(view){\r\n      this.changeViewActive = view\r\n    }\r\n  },\r\n}\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./publication.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./publication.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./publication.vue?vue&type=template&id=65ecf2a5&\"\nimport script from \"./publication.vue?vue&type=script&lang=js&\"\nexport * from \"./publication.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"home\" class=\"d-flex justify-center\">\n    <div v-for=\"(item,index) of publications\" :key=\"index\"  >\n      <div v-for=\"(publication,idPublication) of item.publications\" :key=\"idPublication\">\n        <publication :idPublication=\"idPublication\" :publication=\"publication\" :item=\"item\" :index=\"index\" :loading=\"loading\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport publication from \"@/components/publication\"\nimport moment from \"moment\"\nimport axios from \"axios\"\nexport default {\n  name: 'Home',\n  components:{\n    publication\n  },\n  data() {\n    return {\n      publications:[],\n      loading:false,\n    }\n  },\n  created() {\n    if (!this.dataUser) {\n      this.$router.push(\"/login\");\n    }else{\n      this.getPublicationsOfFollows()\n    }\n  },\n  computed: {\n    ...mapState([\"dataUser\",\"token\"])\n  },\n  methods: {\n    async getPublicationsOfFollows(){\n      this.loading = true;\n      const publicationsOfFollows = await axios.post(\"/functs/publicationsOfFollow\",{},{headers:{\"Authorization\":this.token}});\n      for(const item of publicationsOfFollows.data.publicationFollow){\n\n        for(const id in item.publicationOfUser){\n          const find = item.publicationOfUser[id].reactions.findIndex(element => { return element == this.dataUser._id });\n          item.publicationOfUser[id].isLike = find < 0 ? false : true;\n          item.publicationOfUser[id].timestamp = moment(item.publicationOfUser[id].timestamp).startOf(\"minute\").fromNow()\n        }\n        this.publications.push({publications: item.publicationOfUser,...item.userFollow});\n      }\n      this.loading = false;\n    },\n    async updateLike(id,idFollow,idPublication){\n      const updateLike = await axios.post(\"/functs/likePublication\",{\"idPublication\":id},{headers:{\"Authorization\":this.token}})\n      if(updateLike.data.success){\n        if (updateLike.data.isLike) {\n          //agregar\n          this.publications[idFollow].publications[idPublication].reactions.push(this.dataUser._id) \n        }else{\n          //eliminar\n          const id = this.publications[idFollow].publications[idPublication].reactions.findIndex(id => id == this.dataUser._id)\n          this.publications[idFollow].publications[idPublication].reactions.splice(id,1)\n        }\n        this.publications[idFollow].publications[idPublication].isLike = updateLike.data.isLike\n      }\n    },\n    changeView(view){\n      this.changeViewActive = view\n    }\n  },\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=8b78f922&\"\nimport script from \"./Home.vue?vue&type=script&lang=js&\"\nexport * from \"./Home.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}